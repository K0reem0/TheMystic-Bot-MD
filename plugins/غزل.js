const toMention = id => '@' + id.split('@')[0]

function getRandomItem(list) {
  return list[Math.floor(Math.random() * list.length)]
}

const flirtLines = [
  "يا زين ضحكتك، قسم بالله إنها ترد الروح.. وش خليتي للجمال؟ 💖",
  "كل ما شفتك حسّيت إن الدنيا تزين، وقلبي يدق كنه يسمع اسمك 😳💕",
  "وجهك؟ آية من آيات الجمال.. ولا صوتك؟ موسيقى تمشي على قلب 🥺💓",
  "يا بعد عمري، وجودك لحاله يغيّر مزاجي.. كيف لو تكلمتِ؟ 🌹",
  "من قال إن القمر واحد؟ واضح إنك الثاني 😉✨",
  "أقسم إنك لو ابتسمتي، الحزن يطلع من قلبي ركض 😂❤️",
  "كل البنات حلوين، بس إنتِ؟ شي ثاني، شي يخلي القلب ينبض زيادة 🔥",
  "أنا ما أدور الكمال، بس يوم شفتك.. فهمت وش يعني ملاك 😍",
  "إذا الجمال له اسم، فـ هو اسمك.. وإذا له معنى، فهو نظرتك 💘",
  "بيني وبينك؟ أنا من أول نظرة قلت: خلاص قلبي طاح 💞",
  "أحبك؟ لا والله، أنا هويتك وانتهى الموضوع 💌",
  "حتى اسمي نسيته يوم شفتك.. وش سويتي فيني؟ 🤯",
  "فيك شيء مو طبيعي.. كل ما شفتك قلبي يقول: الله لا يضرك 💗",
  "مو كل ملاك له جناح.. بعضهم مثلك بس يمشون على الأرض 👼",
  "إنتِ مو بس حلوة.. إنتِ مصيبة تمشي على رجلين 😍😂",
  "معقول الجاذبية صارت إنسانة؟ لأنك جذبتيني من أول طله 💫",
  "بعض البنات تسلب العقل، وإنتِ؟ سرقت قلبي وأنا راضي 🥰",
  "من يوم دخلتِ القروب صار المكان فيه نور وسكّر 🍯✨",
  "وش حلاتك؟! كل ما شفتك تطيح الهيبة من عيوني 😂",
  "أنا ما كنت أحب أحد، بس إنتِ غيّرتي قوانيني ♥️",
  "لو كان الغزل جريمة.. فأنا مجرم في حقك كل يوم 😎",
  "علميني كيف الواحد يكون طبيعي بعد ما يشوفك؟ مستحيل 😵‍💫",
  "خجولة؟ عاد الخجل فيك مثل التوت عالخد، لايق وذبح 💘",
  "تدرين؟ وجودك يسوي فرق، حتى ولو ما تكلمتي 💌",
  "لو كان فيه جائزة لألطف وحده، صدقيني بتفوزين بدون تصويت 🏆",
  "كل الناس تشبه بعض.. إلا إنتِ، لحالك فئة فخامة 💎",
  "من صوتك لحروفك.. كل شيء فيك كأنه مرسوم برقة ملاك 👑",
  "اللي خلقك ما خلق شي ناقص.. كل شي فيك كامل 🙈",
  "معك؟ أنسى همومي، وأبتسم بدون سبب 😇",
  "أدري إني كثير أمزح.. بس بوجودك صرت أكتب شعر 🤍",
  "لو الحب ينقاس بالجمال، كان أحبك للسماء وما يكفي ✨",
  "ما بين قوسين، (إنتِ حكاية ما تنكتب ولا تنعاد) 💬",
  "في حضورك، الحروف تخجل.. والكلام يفقد وزنه 💭",
  "لو إنك وردة؟ كان العالم كله حديقة عشقك 🌷",
  "الله يزيدك جمال فوق جمال، بس لا تكثرين ظهور.. قلبي ضعيف 🫣",
  "أنا من بعدك ما صرت أشوف الزين في أحد ثاني 👀💘",
  "تصدقين؟ لو ضحكتي الدنيا تسامحني على كل أخطائي 😂❤️",
  "كل نظراتك تقول شي، بس أنا قلبي يترجمها كلها حب 🥺",
  "يوم أشوفك أنسى الدنيا.. وأنسى حتى شلون أتنفس 💫",
  "أنا مو شاعر، بس وجودك ألهمني أبيات عشق ما تنتهي 💕",
  "فيك من الهدوء اللي يخليني أرتاح، ومن الجمال اللي يدوّخ 🥹",
  "كل شي فيك كأنّه يقول: يا قلب لا تتردد، هذا حبك 👑",
  "يوم أشوفك؟ أحس كأني طلعت من ظلمة ودخلت جنة ♥️"
]

let handler = async (m, { conn, groupMetadata }) => {
  let participants = groupMetadata.participants.map(p => p.id)
  participants = participants.filter(id => id !== conn.user.jid) // استبعاد البوت

  if (participants.length < 1) {
    return m.reply('ما فيه أحد أتغزل فيه 😢')
  }

  let target = getRandomItem(participants)
  let line = getRandomItem(flirtLines)

  await conn.reply(m.chat, `👀 ${toMention(target)}\n\n${line}`, m, {
    mentions: [target]
  })
}

handler.help = ['غزل']
handler.tags = ['fun']
handler.command = ['غزل', 'غزلها']
handler.group = true

export default handler
